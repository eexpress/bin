# vim: filetype=fvwm
SetEnv fvwm			$[HOME]/.fvwm/
SetEnv script		$[HOME]/bin/
DesktopSize			1x1
SetEnv RegularFont	"StringEncoding=utf8:xft:Vera Sans YuanTi:Bold:size=12:encoding=iso10646-1"

######################### 热键
#Key f A 4 JumpExec nautilus --no-desktop
Key f A 4 JumpExec pcmanfm --no-desktop
Key w A 4 JumpExec opera --proxy-pac-url="file:///home/eexp/proxy.pac"
#gnome-terminal的WM_CLASS名和执行名称不同
#xprop |g 'WM_CLASS(STRING)'
Key t A 4 JumpExec xterm
Key s A 4 Exec synapse

Key F1 A N JumpOrExec gnome-terminal-server gnome-terminal
Key F3 A N Exec synapse
Key F10 A A Exec exec $[script]monitor-clip.pl

#切换触摸板
Key F6 A A Exec xinput list-props "SynPS/2 Synaptics TouchPad"|grep "Device Enabled"|grep "1$" && xinput disable "SynPS/2 Synaptics TouchPad" || xinput enable "SynPS/2 Synaptics TouchPad"

Key r A CM restart
Key q A CM quit

######################### 窗口操作
Style * IconBox 64x800-0-0, IconSize 64 64, !IconTitle

Mouse 1 W C Move
Mouse 2 W C Lower
Mouse 3 W C Close
Mouse 4 W C Maximize
Mouse 5 W C Iconify

Mouse 0 I N Iconify
Mouse 3 I N Close

Mouse 1 W M Resize
Mouse 4 W M ResizeMove w-10 w-10 w+5 w+5
Mouse 5 W M ResizeMove w+10 w+10 w-5 w-5

Mouse 1 R N FvwmRearrange -tile -u -mn 2 -resize -m 0 0 96 100
Mouse 4 R N All (CurrentPage,Iconifiable) Iconify off
Mouse 5 R N All (CurrentPage,Iconifiable) Iconify on

#Fn-F?
Key XF86MonBrightnessDown A A Exec xbacklight -dec 10
Key XF86MonBrightnessUp A A Exec xbacklight -inc 10

Key XF86Eject A A Exec exec rhythmbox-client --quit
Key XF86AudioPrev A A Exec exec rhythmbox-client --previous
Key XF86AudioPlay A A Exec exec rhythmbox-client --play-pause
Key XF86AudioNext A A Exec exec rhythmbox-client --next

Key XF86AudioLowerVolume A A Exec exec amixer set Master 5%-
Key XF86AudioRaiseVolume A A Exec exec amixer set Master 5%+
Key XF86AudioMute A A Exec exec amixer -D pulse set Master toggle

Key Print A A Exec import ~/`date '+%Y-%m-%d_%H:%M:%S'`.png

# 方向按键，排列窗口，占半屏幕，下部留空隙
#keyname in /usr/include/X11/keysymdef.h
Key Up W C ResizeMove 96 50 0 0
Key Down W C ResizeMove 96 50 0 50
Key Left W C ResizeMove 48 100 0 0
Key Right W C ResizeMove 48 100 48 0

Key Left W M MoveToPage -1p 0
Key Right W M MoveToPage +1p 0

MenuStyle WindowList Font "$[RegularFont]"
EdgeThickness 1
EdgeCommand Bottom WindowList NoGeometry
######################### 修正系统函数：恢复窗口时，鼠标居中
AddToFunc WindowListFunc
+ I WarpToWindow 50 50

######################### 函数
DestroyFunc JumpOrExec
AddToFunc JumpOrExec
+ I All ($0) WindowListFunc
+ I TestRc (NoMatch) Exec exec $1 &

DestroyFunc JumpExec
AddToFunc JumpExec
+ I All ($0) WindowListFunc
+ I None ($0) Exec exec $* &

######################### 样式设置
Style *		!Handles, !Borders, MouseFocusClickRaises, SloppyFocus, PositionPlacement Center
Style *		!Title

######################### 事件声音
Module FvwmEvent
*FvwmEvent: Cmd "Exec paplay"
SetEnv soundpath		/usr/share/sounds/ubuntu/stereo/
*FvwmEvent: iconify			$[soundpath]window-slide.ogg
*FvwmEvent: deiconify		$[soundpath]message.ogg
*FvwmEvent: destroy_window	$[soundpath]dialog-information.ogg

######################### 启动
DestroyFunc  StartFunction
AddToFunc    StartFunction
+ I Exec fvwm-root -r $[fvwm]desktop.svg
